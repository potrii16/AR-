<!doctype HTML>
<html>
<head>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
  <script>
    AFRAME.registerComponent('touch-rotate', {
      schema: {
        speed: { type: 'number', default: 5 } // Adjust speed for sensitivity
      },
      init: function() {
        this.handleTouchMove = this.handleTouchMove.bind(this);
        this.el.sceneEl.addEventListener('touchmove', this.handleTouchMove, { passive: false });
      },
      handleTouchMove: function(event) {
        if (event.touches.length === 1) {
          const touch = event.touches[0];
          const rotation = this.el.getAttribute('rotation');
          rotation.y += touch.movementX * this.data.speed;
          rotation.x -= touch.movementY * this.data.speed;
          this.el.setAttribute('rotation', rotation);
          event.preventDefault();
        }
      }
    });

    AFRAME.registerComponent('click-listener', {
      init: function() {
        this.el.addEventListener('click', () => {
          alert('White cube clicked!');
        });
        // Handle touch events for mobile devices
        this.el.addEventListener('touchend', (evt) => {
          evt.stopPropagation();  // Prevent triggering rotation or other events
          alert('White cube clicked!');
        });
      }
    });
  </script>
</head>
<body style='margin: 0; overflow: hidden;'>
<a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
  <a-marker preset='hiro'>
    <a-box position="0 0.5 0" rotation="0 0 0" material="color: red; opacity: 0.5" touch-rotate>
      <a-box position="0 0.55 0" rotation="0 0 0" material="color: white; opacity: 1" scale="0.2 0.2 0.2" click-listener></a-box>
    </a-box>
  </a-marker>
  <a-entity camera></a-entity>
</a-scene>
</body>
</html>

