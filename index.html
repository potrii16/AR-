<!doctype HTML>
<html>
<head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script>
      // Component to handle rotation of the red cube
      AFRAME.registerComponent('touch-rotate', {
        schema: {
          speed: {type: 'number', default: 5}
        },
        init: function() {
          this.handleTouchMove = this.handleTouchMove.bind(this);
          this.el.sceneEl.addEventListener('touchmove', this.handleTouchMove, {passive: false});
        },
        handleTouchMove: function(event) {
          const touch = event.touches[0];
          const rotation = this.el.getAttribute('rotation');
          rotation.y += touch.movementX * this.data.speed;
          rotation.x -= touch.movementY * this.data.speed;
          this.el.setAttribute('rotation', rotation);
          event.preventDefault();
        }
      });

      // Component to show alert when the white cube is clicked
      AFRAME.registerComponent('click-listener', {
        init: function() {
          this.el.addEventListener('click', function(evt) {
            alert('Button clicked');
            evt.stopPropagation();  // Prevent click from affecting other elements
          });
        }
      });
    </script>
</head>
<body style='margin: 0; overflow: hidden;'>
<a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
    <a-marker preset='hiro'>
        <a-box position="0 0.5 0" rotation="0 0 0" color="red" opacity="0.5" touch-rotate>
            <a-box position="0 0.2 0" color="white" scale="0.2 0.2 0.2" click-listener></a-box>
        </a-box>
    </a-marker>
    <a-entity camera></a-entity>
</a-scene>
</body>
</html>

